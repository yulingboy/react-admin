# 定时任务管理功能使用说明

## 功能概述

定时任务管理模块提供了系统中定时任务的创建、配置、执行和监控功能。通过可视化界面，管理员可以方便地管理系统内的各种自动化任务，无需手动干预即可让系统按计划执行特定操作。

## 功能特点

- **可视化任务管理**：通过Web界面创建和管理定时任务
- **灵活的调度配置**：支持Cron表达式，灵活设置任务执行时间
- **状态控制**：启动/暂停任务，手动触发一次执行
- **执行日志**：记录详细的任务执行历史，便于问题排查
- **多种执行策略**：支持配置并发执行、错过执行时的处理策略等

## 使用指南

### 访问定时任务模块

1. 登录系统后，在左侧导航菜单中点击`系统管理` -> `定时任务`
2. 系统将显示定时任务列表页面，展示所有已配置的定时任务

### 查看任务列表

任务列表页面显示了系统中所有定时任务的基本信息：

- **任务ID**：系统自动分配的唯一标识
- **任务名称**：任务的名称描述
- **任务组**：任务所属分组（默认或系统）
- **调用目标**：任务执行的目标方法或路径
- **Cron表达式**：任务的执行时间表达式
- **状态**：当前任务状态（运行中/暂停）
- **系统内置**：是否为系统内置任务
- **备注**：附加说明信息
- **创建时间**：任务创建的时间

### 创建新任务

1. 在任务列表页面点击**新建任务**按钮
2. 在弹出的表单中填写任务信息：
   - **任务名称**：输入一个描述性的名称（必填）
   - **任务分组**：选择任务分组（默认/系统）
   - **调用目标**：输入要执行的方法或路径（必填）
   - **Cron表达式**：配置任务执行时间（必填）
   - **执行策略**：选择错过执行时的策略
   - **并发执行**：是否允许任务并发执行
   - **状态**：选择初始状态（暂停/运行中）
   - **备注**：添加任务说明（可选）
3. 点击**确定**按钮提交表单

### Cron表达式说明

Cron表达式用于配置任务的执行时间，格式为：`秒 分 时 日 月 周`

常用示例：
- `0 0 12 * * ?` - 每天中午12点执行
- `0 15 10 ? * MON-FRI` - 每周一至周五上午10:15执行
- `0 0/30 9-17 * * ?` - 每天9点至17点每半小时执行一次
- `0 0 10,14,16 * * ?` - 每天10点、14点和16点执行

### 管理任务

在任务列表中，每个任务右侧都有操作按钮：

- **启动/停止**：切换任务的运行状态
- **执行一次**：立即执行一次任务，无需等待调度时间
- **查看日志**：显示该任务的执行历史记录
- **编辑**：修改任务配置
- **删除**：移除任务（系统内置任务无法删除）

### 任务日志查看

1. 点击任务行中的**日志**按钮
2. 系统显示该任务的执行历史记录，包含：
   - 执行时间、耗时
   - 执行状态（成功/失败）
   - 执行结果信息
   - 异常信息（如果执行失败）
3. 可以点击**清空日志**按钮清除历史记录

## 注意事项

1. **系统内置任务**
   - 系统内置任务（标记为"是"）通常用于系统维护，不建议随意修改或停止
   - 系统内置任务无法删除，只能修改其配置或暂停执行

2. **Cron表达式**
   - 确保Cron表达式格式正确，否则任务将无法正常调度
   - 考虑服务器时区设置，避免任务在非预期时间执行

3. **执行策略**
   - 对于重要任务，建议设置适当的错过执行策略，确保任务不会因系统重启等原因被遗漏
   - 对于资源密集型任务，建议禁止并发执行，防止系统资源过度消耗

4. **性能考虑**
   - 避免设置过于频繁的执行时间，特别是对于重量级任务
   - 定期清理不必要的任务日志，减少数据库负担

## 常见问题

1. **任务创建后不执行**
   - 检查任务状态是否为"运行中"
   - 验证Cron表达式是否正确
   - 查看系统日志是否有相关错误

2. **任务执行失败**
   - 查看任务日志中的异常信息
   - 检查调用目标是否存在且正确
   - 确认执行任务所需的系统资源是否充足

3. **任务执行时间不准确**
   - 检查服务器时区设置
   - 查看系统负载，高负载可能导致任务延迟执行